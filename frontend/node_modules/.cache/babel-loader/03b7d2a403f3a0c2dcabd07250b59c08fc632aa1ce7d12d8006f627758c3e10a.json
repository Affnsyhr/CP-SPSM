{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Documents\\\\Learning - Ku\\\\Project Gua\\\\CP - SPSM - ALL ROLE\\\\frontend\\\\src\\\\pages\\\\student-registration.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Button } from \"../components/ui/button\";\nimport { Input } from \"../components/ui/input\";\nimport { Label } from \"../components/ui/label\";\nimport { useToast } from \"../hooks/use-toast\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function StudentRegistrationPage() {\n  _s();\n  const [student, setStudent] = useState({\n    nama_lengkap: \"\",\n    tempat_lahir: \"\",\n    tanggal_lahir: \"\",\n    jenis_kelamin: \"L\",\n    alamat: \"\"\n  });\n  const [documents, setDocuments] = useState({\n    akte: null,\n    kk: null,\n    rapor: null\n  });\n  const [programId, setProgramId] = useState(\"\");\n  const [tahunAjaranId, setTahunAjaranId] = useState(\"\");\n  const [jalur, setJalur] = useState(\"\");\n  const [catatan, setCatatan] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n\n  // State untuk tracking field yang sudah disentuh\n  const [touchedFields, setTouchedFields] = useState({\n    nama_lengkap: false,\n    tempat_lahir: false,\n    tanggal_lahir: false,\n    alamat: false,\n    programId: false,\n    tahunAjaranId: false,\n    jalur: false,\n    akte: false,\n    kk: false,\n    rapor: false\n  });\n\n  // State untuk tracking error status setiap field\n  const [fieldErrors, setFieldErrors] = useState({\n    nama_lengkap: null,\n    tempat_lahir: null,\n    tanggal_lahir: null,\n    alamat: null,\n    programId: null,\n    tahunAjaranId: null,\n    jalur: null,\n    akte: null,\n    kk: null,\n    rapor: null\n  });\n  const {\n    toast\n  } = useToast();\n  const navigate = useNavigate();\n  const [tahunAjaranOptions, setTahunAjaranOptions] = useState([]);\n  const [sudahAdaSiswa, setSudahAdaSiswa] = useState(false);\n  const [programOptions, setProgramOptions] = useState([]);\n  const [jalurOptions, setJalurOptions] = useState([]);\n\n  // Fungsi validasi field\n  const validateField = (fieldName, value) => {\n    switch (fieldName) {\n      case 'nama_lengkap':\n        if (!value.trim()) {\n          return 'Nama lengkap siswa wajib diisi';\n        }\n        if (value.trim().split(' ').length < 2) {\n          return 'Nama lengkap minimal 2 kata';\n        }\n        if (value.trim().length < 3) {\n          return 'Nama lengkap terlalu pendek';\n        }\n        return null;\n      case 'tempat_lahir':\n        if (!value.trim()) {\n          return 'Tempat lahir wajib diisi';\n        }\n        if (value.trim().length < 2) {\n          return 'Tempat lahir terlalu pendek';\n        }\n        return null;\n      case 'tanggal_lahir':\n        if (!value) {\n          return 'Tanggal lahir wajib diisi';\n        }\n        const today = new Date();\n        const birthDate = new Date(value);\n        const age = today.getFullYear() - birthDate.getFullYear();\n        if (age < 4 || age > 18) {\n          return 'Usia siswa harus antara 4-18 tahun';\n        }\n        return null;\n      case 'alamat':\n        if (!value.trim()) {\n          return 'Alamat wajib diisi';\n        }\n        if (value.trim().length < 10) {\n          return 'Alamat terlalu pendek, minimal 10 karakter';\n        }\n        return null;\n      case 'programId':\n        if (!value) {\n          return 'Program sekolah wajib dipilih';\n        }\n        return null;\n      case 'tahunAjaranId':\n        if (!value) {\n          return 'Tahun ajaran wajib dipilih';\n        }\n        return null;\n      case 'jalur':\n        if (!value) {\n          return 'Jalur pendaftaran wajib dipilih';\n        }\n        return null;\n      case 'akte':\n        if (!value) {\n          return 'Akte kelahiran wajib diupload';\n        }\n        if (value && !value.name.toLowerCase().endsWith('.pdf')) {\n          return 'Akte kelahiran harus dalam format PDF';\n        }\n        return null;\n      case 'kk':\n        if (!value) {\n          return 'Kartu keluarga wajib diupload';\n        }\n        if (value && !value.name.toLowerCase().endsWith('.pdf')) {\n          return 'Kartu keluarga harus dalam format PDF';\n        }\n        return null;\n      case 'rapor':\n        if (!value) {\n          return 'Rapor wajib diupload';\n        }\n        if (value && !value.name.toLowerCase().endsWith('.pdf')) {\n          return 'Rapor harus dalam format PDF';\n        }\n        return null;\n      default:\n        return null;\n    }\n  };\n\n  // Handler untuk field blur (saat user selesai mengetik)\n  const handleFieldBlur = (fieldName, value) => {\n    setTouchedFields(prev => ({\n      ...prev,\n      [fieldName]: true\n    }));\n    const error = validateField(fieldName, value);\n    setFieldErrors(prev => ({\n      ...prev,\n      [fieldName]: error\n    }));\n    if (error) {\n      toast({\n        title: \"Kesalahan Pengisian\",\n        description: error,\n        variant: \"destructive\",\n        duration: 3000\n      });\n    }\n  };\n\n  // Handler untuk validasi real-time saat mengetik\n  const handleFieldChange = (fieldName, value) => {\n    // Update state berdasarkan field\n    if (fieldName === 'programId') {\n      setProgramId(value);\n    } else if (fieldName === 'tahunAjaranId') {\n      setTahunAjaranId(value);\n    } else if (fieldName === 'jalur') {\n      setJalur(value);\n    } else if (fieldName === 'catatan') {\n      setCatatan(value);\n    } else {\n      setStudent(prev => ({\n        ...prev,\n        [fieldName]: value\n      }));\n    }\n\n    // Hanya validasi jika field sudah pernah disentuh\n    if (touchedFields[fieldName]) {\n      const error = validateField(fieldName, value);\n      setFieldErrors(prev => ({\n        ...prev,\n        [fieldName]: error\n      }));\n      if (error) {\n        toast({\n          title: \"Kesalahan Pengisian\",\n          description: error,\n          variant: \"destructive\",\n          duration: 2000\n        });\n      }\n    }\n  };\n\n  // Fungsi untuk mendapatkan class CSS berdasarkan error status\n  const getInputClassName = fieldName => {\n    const baseClass = \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\";\n    if (touchedFields[fieldName] && fieldErrors[fieldName]) {\n      return `${baseClass} border-red-500 focus-visible:ring-red-500`;\n    }\n    return baseClass;\n  };\n\n  // Komponen untuk menampilkan error message\n  const ErrorMessage = ({\n    fieldName\n  }) => {\n    if (touchedFields[fieldName] && fieldErrors[fieldName]) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-red-500 mt-1 flex items-center gap-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          width: \"16\",\n          height: \"16\",\n          viewBox: \"0 0 24 24\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          className: \"h-4 w-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n            cx: \"12\",\n            cy: \"12\",\n            r: \"10\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n            x1: \"12\",\n            x2: \"12\",\n            y1: \"8\",\n            y2: \"12\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n            x1: \"12\",\n            x2: \"12.01\",\n            y1: \"16\",\n            y2: \"16\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this), fieldErrors[fieldName]]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this);\n    }\n    return null;\n  };\n\n  // Komponen untuk menampilkan helper text\n  const HelperText = ({\n    text,\n    className = \"\"\n  }) => {\n    if (!text) return null;\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: `text-xs text-muted-foreground mt-1 ${className}`,\n      children: text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }, this);\n  };\n  const handleStudentChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setStudent({\n      ...student,\n      [name]: value\n    });\n\n    // Validasi real-time jika field sudah pernah disentuh\n    if (touchedFields[name]) {\n      const error = validateField(name, value);\n      setFieldErrors(prev => ({\n        ...prev,\n        [name]: error\n      }));\n      if (error) {\n        toast({\n          title: \"Kesalahan Pengisian\",\n          description: error,\n          variant: \"destructive\",\n          duration: 2000\n        });\n      }\n    }\n  };\n  const handleDocumentChange = e => {\n    const {\n      name,\n      files\n    } = e.target;\n    const file = files[0];\n    setDocuments({\n      ...documents,\n      [name]: file\n    });\n\n    // Validasi real-time jika field sudah pernah disentuh\n    if (touchedFields[name]) {\n      const error = validateField(name, file);\n      setFieldErrors(prev => ({\n        ...prev,\n        [name]: error\n      }));\n      if (error) {\n        toast({\n          title: \"Kesalahan Pengisian\",\n          description: error,\n          variant: \"destructive\",\n          duration: 2000\n        });\n      }\n    }\n  };\n  const getToken = () => {\n    var _JSON$parse;\n    return localStorage.getItem('token') || ((_JSON$parse = JSON.parse(localStorage.getItem('user'))) === null || _JSON$parse === void 0 ? void 0 : _JSON$parse.token);\n  };\n\n  // Filter jalur sesuai program yang dipilih\n  const filteredJalurOptions = jalurOptions.filter(j => String(j.program_id) === String(programId));\n\n  // Cari program_jalur_id berdasarkan programId dan jalur\n  const getProgramJalurId = () => {\n    const found = jalurOptions.find(j => String(j.program_id) === String(programId) && j.jenis_pendaftar === jalur);\n    return found ? found.id : null;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    // Tampilkan toast loading\n    toast({\n      title: \"Memproses Pendaftaran\",\n      description: \"Mohon tunggu sebentar...\",\n      duration: 2000\n    });\n    try {\n      // Validasi semua field sebelum submit\n      const fieldsToValidate = [{\n        name: 'nama_lengkap',\n        value: student.nama_lengkap\n      }, {\n        name: 'tempat_lahir',\n        value: student.tempat_lahir\n      }, {\n        name: 'tanggal_lahir',\n        value: student.tanggal_lahir\n      }, {\n        name: 'alamat',\n        value: student.alamat\n      }, {\n        name: 'programId',\n        value: programId\n      }, {\n        name: 'tahunAjaranId',\n        value: tahunAjaranId\n      }, {\n        name: 'jalur',\n        value: jalur\n      }, {\n        name: 'akte',\n        value: documents.akte\n      }, {\n        name: 'kk',\n        value: documents.kk\n      }, {\n        name: 'rapor',\n        value: documents.rapor\n      }];\n      let hasErrors = false;\n      for (const field of fieldsToValidate) {\n        const error = validateField(field.name, field.value);\n        if (error) {\n          toast({\n            title: \"Kesalahan Pengisian\",\n            description: error,\n            variant: \"destructive\",\n            duration: 4000\n          });\n          hasErrors = true;\n          break; // Hentikan loop setelah error pertama\n        }\n      }\n      if (hasErrors) {\n        return;\n      }\n\n      // 1. Tambah siswa\n      const resSiswa = await fetch(\"/api/siswa\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${getToken()}`\n        },\n        body: JSON.stringify(student)\n      });\n      const dataSiswa = await resSiswa.json();\n      if (!resSiswa.ok || !dataSiswa.data || !dataSiswa.data.siswa_id) {\n        throw new Error(dataSiswa.message || \"Gagal menambah data siswa. Silakan cek kembali.\");\n      }\n      const siswa_id = dataSiswa.data.siswa_id;\n\n      // 2. Submit pendaftaran (dapatkan pendaftaran_id)\n      const program_jalur_id = getProgramJalurId();\n      if (!program_jalur_id) {\n        toast({\n          title: 'Jalur tidak valid',\n          description: 'Pilih jalur yang sesuai dengan program',\n          variant: 'destructive'\n        });\n        setIsLoading(false);\n        return;\n      }\n      const resPendaftaran = await fetch(\"/api/pendaftaran\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": `Bearer ${getToken()}`\n        },\n        body: JSON.stringify({\n          siswa_id,\n          program_id: programId,\n          tahun_ajaran_id: tahunAjaranId,\n          catatan,\n          program_jalur_id\n        })\n      });\n      const dataPendaftaran = await resPendaftaran.json();\n      if (!resPendaftaran.ok || !dataPendaftaran.data || !dataPendaftaran.data.pendaftaran_id) {\n        throw new Error(dataPendaftaran.message || \"Gagal mendaftarkan siswa. Silakan coba lagi.\");\n      }\n      const pendaftaran_id = dataPendaftaran.data.pendaftaran_id;\n\n      // 3. Upload dokumen (pakai pendaftaran_id)\n      for (const [jenis, file] of Object.entries(documents)) {\n        if (!file) continue;\n        const formData = new FormData();\n        formData.append(\"file\", file);\n        formData.append(\"pendaftaran_id\", pendaftaran_id);\n        formData.append(\"jenis_dokumen\", jenis === \"kk\" ? \"kartu_keluarga\" : jenis === \"akte\" ? \"akta_kelahiran\" : \"lainnya\" // rapor dikirim sebagai 'lainnya'\n        );\n        const resDoc = await fetch(\"/api/dokumen\", {\n          method: \"POST\",\n          headers: {\n            \"Authorization\": `Bearer ${getToken()}`\n          },\n          body: formData\n        });\n        const dataDoc = await resDoc.json();\n        if (!resDoc.ok) throw new Error(dataDoc.message || `Gagal upload dokumen ${jenis}. Silakan coba lagi.`);\n      }\n      toast({\n        title: \"Pendaftaran Berhasil\",\n        description: `Siswa ${student.nama_lengkap} berhasil didaftarkan.`\n      });\n      navigate(\"/dashboard\"); // atau ke halaman lain sesuai kebutuhan\n    } catch (error) {\n      // Tampilkan toast error dengan pesan yang spesifik\n      toast({\n        title: \"Pendaftaran Gagal\",\n        description: error.message,\n        variant: \"destructive\",\n        duration: 4000\n      });\n\n      // Log error untuk debugging\n      console.error('Registration error:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Fetch tahun ajaran dari backend\n  useEffect(() => {\n    fetch('/api/tahunajaran', {\n      headers: {\n        'Authorization': `Bearer ${getToken()}`\n      }\n    }).then(res => res.json()).then(data => {\n      if (data && data.data) {\n        setTahunAjaranOptions(data.data);\n      }\n    });\n  }, []);\n\n  // Cek apakah user sudah pernah mendaftarkan siswa\n  useEffect(() => {\n    fetch('/api/siswa/my', {\n      headers: {\n        'Authorization': `Bearer ${getToken()}`\n      }\n    }).then(res => res.json()).then(data => {\n      if (data && data.data && data.data.length > 0) {\n        setSudahAdaSiswa(true);\n      }\n    });\n  }, []);\n\n  // Fetch program dari backend\n  useEffect(() => {\n    fetch('/api/program', {\n      headers: {\n        'Authorization': `Bearer ${getToken()}`\n      }\n    }).then(res => res.json()).then(data => {\n      if (data && data.data) {\n        setProgramOptions(data.data);\n      }\n    });\n  }, []);\n\n  // Fetch jalur pendaftaran dari backend\n  useEffect(() => {\n    fetch('/api/program/jalur', {\n      headers: {\n        'Authorization': `Bearer ${getToken()}`\n      }\n    }).then(res => res.json()).then(data => {\n      if (data && data.data) {\n        setJalurOptions(data.data);\n      }\n    });\n  }, []);\n\n  // Ambil unique jalur dari jalurOptions\n  const uniqueJalur = Array.from(new Set(jalurOptions.map(j => j.jenis_pendaftar))).map(jenis => {\n    return jalurOptions.find(j => j.jenis_pendaftar === jenis);\n  });\n\n  // Mapping label jalur\n  const getJalurLabel = value => {\n    switch (value) {\n      case 'reguler':\n        return 'Reguler';\n      case 'Prestasi akademik':\n        return 'Prestasi Akademik';\n      case 'prestasi non akademik':\n        return 'Prestasi Non Akademik';\n      case 'tahfiz':\n        return 'Tahfizh';\n      default:\n        return value;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex min-h-screen items-center justify-center p-6\",\n    children: sudahAdaSiswa ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-lg bg-white p-8 rounded-lg shadow text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold mb-4\",\n        children: \"Pendaftaran Siswa\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mb-4\",\n        children: \"Anda sudah mendaftarkan siswa. Satu wali hanya boleh mendaftarkan satu siswa.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => navigate('/dashboard'),\n        children: \"Kembali ke Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 514,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 511,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"w-full max-w-lg space-y-6 bg-white p-8 rounded-lg shadow\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold mb-4\",\n        children: \"Pendaftaran Siswa Baru\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"nama_lengkap\",\n          children: \"Nama Lengkap Siswa\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          id: \"nama_lengkap\",\n          name: \"nama_lengkap\",\n          value: student.nama_lengkap,\n          onChange: handleStudentChange,\n          required: true,\n          disabled: isLoading,\n          onBlur: () => handleFieldBlur('nama_lengkap', student.nama_lengkap)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(HelperText, {\n          text: \"Minimal 2 kata (nama depan dan belakang)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          fieldName: \"nama_lengkap\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"tempat_lahir\",\n          children: \"Tempat Lahir\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 527,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          id: \"tempat_lahir\",\n          name: \"tempat_lahir\",\n          value: student.tempat_lahir,\n          onChange: handleStudentChange,\n          required: true,\n          disabled: isLoading,\n          onBlur: () => handleFieldBlur('tempat_lahir', student.tempat_lahir)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(HelperText, {\n          text: \"Contoh: Jakarta, Bandung, Surabaya\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          fieldName: \"tempat_lahir\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 530,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 526,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"tanggal_lahir\",\n          children: \"Tanggal Lahir\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          id: \"tanggal_lahir\",\n          name: \"tanggal_lahir\",\n          type: \"date\",\n          value: student.tanggal_lahir,\n          onChange: handleStudentChange,\n          required: true,\n          disabled: isLoading,\n          onBlur: () => handleFieldBlur('tanggal_lahir', student.tanggal_lahir)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(HelperText, {\n          text: \"Usia siswa harus antara 4-18 tahun\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          fieldName: \"tanggal_lahir\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"jenis_kelamin\",\n          children: \"Jenis Kelamin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"jenis_kelamin\",\n          name: \"jenis_kelamin\",\n          value: student.jenis_kelamin,\n          onChange: handleStudentChange,\n          required: true,\n          disabled: isLoading,\n          className: \"w-full border rounded p-2\",\n          onBlur: () => handleFieldBlur('jenis_kelamin', student.jenis_kelamin),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"L\",\n            children: \"Laki-laki\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 541,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"P\",\n            children: \"Perempuan\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          fieldName: \"jenis_kelamin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 538,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"alamat\",\n          children: \"Alamat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          id: \"alamat\",\n          name: \"alamat\",\n          value: student.alamat,\n          onChange: handleStudentChange,\n          required: true,\n          disabled: isLoading,\n          onBlur: () => handleFieldBlur('alamat', student.alamat)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 548,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(HelperText, {\n          text: \"Minimal 10 karakter, alamat lengkap\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 549,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          fieldName: \"alamat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"akte\",\n          children: \"Akte Kelahiran (PDF)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          id: \"akte\",\n          name: \"akte\",\n          type: \"file\",\n          accept: \".pdf\",\n          onChange: handleDocumentChange,\n          required: true,\n          disabled: isLoading,\n          onBlur: () => handleFieldBlur('akte', documents.akte)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 555,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(HelperText, {\n          text: \"Upload file PDF akte kelahiran siswa\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 556,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          fieldName: \"akte\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 557,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 553,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"kk\",\n          children: \"Kartu Keluarga (PDF)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          id: \"kk\",\n          name: \"kk\",\n          type: \"file\",\n          accept: \".pdf\",\n          onChange: handleDocumentChange,\n          required: true,\n          disabled: isLoading,\n          onBlur: () => handleFieldBlur('kk', documents.kk)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(HelperText, {\n          text: \"Upload file PDF kartu keluarga\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 562,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          fieldName: \"kk\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 563,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"rapor\",\n          children: \"Rapor (PDF)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 566,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          id: \"rapor\",\n          name: \"rapor\",\n          type: \"file\",\n          accept: \".pdf\",\n          onChange: handleDocumentChange,\n          required: true,\n          disabled: isLoading,\n          onBlur: () => handleFieldBlur('rapor', documents.rapor)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(HelperText, {\n          text: \"Upload file PDF rapor terakhir siswa\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 568,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          fieldName: \"rapor\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 565,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"program\",\n          children: \"Program Sekolah\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"program\",\n          value: programId,\n          onChange: e => handleFieldChange('programId', e.target.value),\n          required: true,\n          disabled: isLoading,\n          className: getInputClassName('programId'),\n          onBlur: () => handleFieldBlur('programId', programId),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Pilih Program\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 575,\n            columnNumber: 15\n          }, this), programOptions.map(opt => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: opt.program_id,\n            children: opt.nama_program\n          }, opt.program_id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 577,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          fieldName: \"programId\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 580,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"jalur\",\n          children: \"Jalur Pendaftaran\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 583,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"jalur\",\n          name: \"jalur\",\n          value: jalur,\n          onChange: e => handleFieldChange('jalur', e.target.value),\n          required: true,\n          className: getInputClassName('jalur'),\n          onBlur: () => handleFieldBlur('jalur', jalur),\n          disabled: !programId || isLoading,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Pilih Jalur\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 594,\n            columnNumber: 15\n          }, this), filteredJalurOptions.map(jalurOpt => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: jalurOpt.jenis_pendaftar,\n            children: jalurOpt.jenis_pendaftar\n          }, jalurOpt.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 596,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          fieldName: \"jalur\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 601,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 582,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"tahunajaran\",\n          children: \"Tahun Ajaran\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"tahunajaran\",\n          value: tahunAjaranId,\n          onChange: e => handleFieldChange('tahunAjaranId', e.target.value),\n          required: true,\n          disabled: isLoading,\n          className: getInputClassName('tahunAjaranId'),\n          onBlur: () => handleFieldBlur('tahunAjaranId', tahunAjaranId),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Pilih Tahun Ajaran\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 606,\n            columnNumber: 15\n          }, this), tahunAjaranOptions.map(opt => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: opt.id_tahunajaran,\n            children: opt.tahun_ajaran\n          }, opt.id_tahunajaran, false, {\n            fileName: _jsxFileName,\n            lineNumber: 608,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 605,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          fieldName: \"tahunAjaranId\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 611,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          htmlFor: \"catatan\",\n          children: \"Catatan (opsional)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 614,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          id: \"catatan\",\n          value: catatan,\n          onChange: e => handleFieldChange('catatan', e.target.value),\n          disabled: isLoading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 615,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          fieldName: \"catatan\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 616,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 613,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        className: \"w-full\",\n        disabled: isLoading,\n        children: isLoading ? \"Memproses...\" : \"Daftarkan Siswa\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 618,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"button\",\n        variant: \"outline\",\n        className: \"w-full\",\n        onClick: () => navigate('/dashboard'),\n        disabled: isLoading,\n        children: \"Kembali\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 621,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 517,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 509,\n    columnNumber: 5\n  }, this);\n}\n_s(StudentRegistrationPage, \"yYRpNtKRK6QG1FY9jG4kCRwEXUc=\", false, function () {\n  return [useToast, useNavigate];\n});\n_c = StudentRegistrationPage;\nvar _c;\n$RefreshReg$(_c, \"StudentRegistrationPage\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Button","Input","Label","useToast","jsxDEV","_jsxDEV","StudentRegistrationPage","_s","student","setStudent","nama_lengkap","tempat_lahir","tanggal_lahir","jenis_kelamin","alamat","documents","setDocuments","akte","kk","rapor","programId","setProgramId","tahunAjaranId","setTahunAjaranId","jalur","setJalur","catatan","setCatatan","isLoading","setIsLoading","touchedFields","setTouchedFields","fieldErrors","setFieldErrors","toast","navigate","tahunAjaranOptions","setTahunAjaranOptions","sudahAdaSiswa","setSudahAdaSiswa","programOptions","setProgramOptions","jalurOptions","setJalurOptions","validateField","fieldName","value","trim","split","length","today","Date","birthDate","age","getFullYear","name","toLowerCase","endsWith","handleFieldBlur","prev","error","title","description","variant","duration","handleFieldChange","getInputClassName","baseClass","ErrorMessage","className","children","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","cx","cy","r","fileName","_jsxFileName","lineNumber","columnNumber","x1","x2","y1","y2","HelperText","text","handleStudentChange","e","target","handleDocumentChange","files","file","getToken","_JSON$parse","localStorage","getItem","JSON","parse","token","filteredJalurOptions","filter","j","String","program_id","getProgramJalurId","found","find","jenis_pendaftar","id","handleSubmit","preventDefault","fieldsToValidate","hasErrors","field","resSiswa","fetch","method","headers","body","stringify","dataSiswa","json","ok","data","siswa_id","Error","message","program_jalur_id","resPendaftaran","tahun_ajaran_id","dataPendaftaran","pendaftaran_id","jenis","Object","entries","formData","FormData","append","resDoc","dataDoc","console","then","res","uniqueJalur","Array","from","Set","map","getJalurLabel","onClick","onSubmit","htmlFor","onChange","required","disabled","onBlur","type","accept","opt","nama_program","jalurOpt","id_tahunajaran","tahun_ajaran","_c","$RefreshReg$"],"sources":["C:/Users/USER/Documents/Learning - Ku/Project Gua/CP - SPSM - ALL ROLE/frontend/src/pages/student-registration.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Button } from \"../components/ui/button\";\r\nimport { Input } from \"../components/ui/input\";\r\nimport { Label } from \"../components/ui/label\";\r\nimport { useToast } from \"../hooks/use-toast\";\r\n\r\nexport default function StudentRegistrationPage() {\r\n  const [student, setStudent] = useState({\r\n    nama_lengkap: \"\",\r\n    tempat_lahir: \"\",\r\n    tanggal_lahir: \"\",\r\n    jenis_kelamin: \"L\",\r\n    alamat: \"\"\r\n  });\r\n  const [documents, setDocuments] = useState({\r\n    akte: null,\r\n    kk: null,\r\n    rapor: null,\r\n  });\r\n  const [programId, setProgramId] = useState(\"\");\r\n  const [tahunAjaranId, setTahunAjaranId] = useState(\"\");\r\n  const [jalur, setJalur] = useState(\"\");\r\n  const [catatan, setCatatan] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  \r\n  // State untuk tracking field yang sudah disentuh\r\n  const [touchedFields, setTouchedFields] = useState({\r\n    nama_lengkap: false,\r\n    tempat_lahir: false,\r\n    tanggal_lahir: false,\r\n    alamat: false,\r\n    programId: false,\r\n    tahunAjaranId: false,\r\n    jalur: false,\r\n    akte: false,\r\n    kk: false,\r\n    rapor: false\r\n  });\r\n  \r\n  // State untuk tracking error status setiap field\r\n  const [fieldErrors, setFieldErrors] = useState({\r\n    nama_lengkap: null,\r\n    tempat_lahir: null,\r\n    tanggal_lahir: null,\r\n    alamat: null,\r\n    programId: null,\r\n    tahunAjaranId: null,\r\n    jalur: null,\r\n    akte: null,\r\n    kk: null,\r\n    rapor: null\r\n  });\r\n  \r\n  const { toast } = useToast();\r\n  const navigate = useNavigate();\r\n  const [tahunAjaranOptions, setTahunAjaranOptions] = useState([]);\r\n  const [sudahAdaSiswa, setSudahAdaSiswa] = useState(false);\r\n  const [programOptions, setProgramOptions] = useState([]);\r\n  const [jalurOptions, setJalurOptions] = useState([]);\r\n\r\n  // Fungsi validasi field\r\n  const validateField = (fieldName, value) => {\r\n    switch (fieldName) {\r\n      case 'nama_lengkap':\r\n        if (!value.trim()) {\r\n          return 'Nama lengkap siswa wajib diisi';\r\n        }\r\n        if (value.trim().split(' ').length < 2) {\r\n          return 'Nama lengkap minimal 2 kata';\r\n        }\r\n        if (value.trim().length < 3) {\r\n          return 'Nama lengkap terlalu pendek';\r\n        }\r\n        return null;\r\n\r\n      case 'tempat_lahir':\r\n        if (!value.trim()) {\r\n          return 'Tempat lahir wajib diisi';\r\n        }\r\n        if (value.trim().length < 2) {\r\n          return 'Tempat lahir terlalu pendek';\r\n        }\r\n        return null;\r\n\r\n      case 'tanggal_lahir':\r\n        if (!value) {\r\n          return 'Tanggal lahir wajib diisi';\r\n        }\r\n        const today = new Date();\r\n        const birthDate = new Date(value);\r\n        const age = today.getFullYear() - birthDate.getFullYear();\r\n        if (age < 4 || age > 18) {\r\n          return 'Usia siswa harus antara 4-18 tahun';\r\n        }\r\n        return null;\r\n\r\n      case 'alamat':\r\n        if (!value.trim()) {\r\n          return 'Alamat wajib diisi';\r\n        }\r\n        if (value.trim().length < 10) {\r\n          return 'Alamat terlalu pendek, minimal 10 karakter';\r\n        }\r\n        return null;\r\n\r\n      case 'programId':\r\n        if (!value) {\r\n          return 'Program sekolah wajib dipilih';\r\n        }\r\n        return null;\r\n\r\n      case 'tahunAjaranId':\r\n        if (!value) {\r\n          return 'Tahun ajaran wajib dipilih';\r\n        }\r\n        return null;\r\n\r\n      case 'jalur':\r\n        if (!value) {\r\n          return 'Jalur pendaftaran wajib dipilih';\r\n        }\r\n        return null;\r\n\r\n      case 'akte':\r\n        if (!value) {\r\n          return 'Akte kelahiran wajib diupload';\r\n        }\r\n        if (value && !value.name.toLowerCase().endsWith('.pdf')) {\r\n          return 'Akte kelahiran harus dalam format PDF';\r\n        }\r\n        return null;\r\n\r\n      case 'kk':\r\n        if (!value) {\r\n          return 'Kartu keluarga wajib diupload';\r\n        }\r\n        if (value && !value.name.toLowerCase().endsWith('.pdf')) {\r\n          return 'Kartu keluarga harus dalam format PDF';\r\n        }\r\n        return null;\r\n\r\n      case 'rapor':\r\n        if (!value) {\r\n          return 'Rapor wajib diupload';\r\n        }\r\n        if (value && !value.name.toLowerCase().endsWith('.pdf')) {\r\n          return 'Rapor harus dalam format PDF';\r\n        }\r\n        return null;\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  // Handler untuk field blur (saat user selesai mengetik)\r\n  const handleFieldBlur = (fieldName, value) => {\r\n    setTouchedFields(prev => ({ ...prev, [fieldName]: true }));\r\n    \r\n    const error = validateField(fieldName, value);\r\n    setFieldErrors(prev => ({ ...prev, [fieldName]: error }));\r\n    \r\n    if (error) {\r\n      toast({\r\n        title: \"Kesalahan Pengisian\",\r\n        description: error,\r\n        variant: \"destructive\",\r\n        duration: 3000,\r\n      });\r\n    }\r\n  };\r\n\r\n  // Handler untuk validasi real-time saat mengetik\r\n  const handleFieldChange = (fieldName, value) => {\r\n    // Update state berdasarkan field\r\n    if (fieldName === 'programId') {\r\n      setProgramId(value);\r\n    } else if (fieldName === 'tahunAjaranId') {\r\n      setTahunAjaranId(value);\r\n    } else if (fieldName === 'jalur') {\r\n      setJalur(value);\r\n    } else if (fieldName === 'catatan') {\r\n      setCatatan(value);\r\n    } else {\r\n      setStudent(prev => ({ ...prev, [fieldName]: value }));\r\n    }\r\n    \r\n    // Hanya validasi jika field sudah pernah disentuh\r\n    if (touchedFields[fieldName]) {\r\n      const error = validateField(fieldName, value);\r\n      setFieldErrors(prev => ({ ...prev, [fieldName]: error }));\r\n      \r\n      if (error) {\r\n        toast({\r\n          title: \"Kesalahan Pengisian\",\r\n          description: error,\r\n          variant: \"destructive\",\r\n          duration: 2000,\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  // Fungsi untuk mendapatkan class CSS berdasarkan error status\r\n  const getInputClassName = (fieldName) => {\r\n    const baseClass = \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\";\r\n    \r\n    if (touchedFields[fieldName] && fieldErrors[fieldName]) {\r\n      return `${baseClass} border-red-500 focus-visible:ring-red-500`;\r\n    }\r\n    \r\n    return baseClass;\r\n  };\r\n\r\n  // Komponen untuk menampilkan error message\r\n  const ErrorMessage = ({ fieldName }) => {\r\n    if (touchedFields[fieldName] && fieldErrors[fieldName]) {\r\n      return (\r\n        <p className=\"text-sm text-red-500 mt-1 flex items-center gap-1\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"h-4 w-4\">\r\n            <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\r\n            <line x1=\"12\" x2=\"12\" y1=\"8\" y2=\"12\"></line>\r\n            <line x1=\"12\" x2=\"12.01\" y1=\"16\" y2=\"16\"></line>\r\n          </svg>\r\n          {fieldErrors[fieldName]}\r\n        </p>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  // Komponen untuk menampilkan helper text\r\n  const HelperText = ({ text, className = \"\" }) => {\r\n    if (!text) return null;\r\n    return (\r\n      <p className={`text-xs text-muted-foreground mt-1 ${className}`}>\r\n        {text}\r\n      </p>\r\n    );\r\n  };\r\n\r\n  const handleStudentChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setStudent({ ...student, [name]: value });\r\n    \r\n    // Validasi real-time jika field sudah pernah disentuh\r\n    if (touchedFields[name]) {\r\n      const error = validateField(name, value);\r\n      setFieldErrors(prev => ({ ...prev, [name]: error }));\r\n      \r\n      if (error) {\r\n        toast({\r\n          title: \"Kesalahan Pengisian\",\r\n          description: error,\r\n          variant: \"destructive\",\r\n          duration: 2000,\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDocumentChange = (e) => {\r\n    const { name, files } = e.target;\r\n    const file = files[0];\r\n    setDocuments({ ...documents, [name]: file });\r\n    \r\n    // Validasi real-time jika field sudah pernah disentuh\r\n    if (touchedFields[name]) {\r\n      const error = validateField(name, file);\r\n      setFieldErrors(prev => ({ ...prev, [name]: error }));\r\n      \r\n      if (error) {\r\n        toast({\r\n          title: \"Kesalahan Pengisian\",\r\n          description: error,\r\n          variant: \"destructive\",\r\n          duration: 2000,\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const getToken = () => {\r\n    return localStorage.getItem('token') || (JSON.parse(localStorage.getItem('user'))?.token);\r\n  };\r\n\r\n  // Filter jalur sesuai program yang dipilih\r\n  const filteredJalurOptions = jalurOptions.filter(j => String(j.program_id) === String(programId));\r\n\r\n  // Cari program_jalur_id berdasarkan programId dan jalur\r\n  const getProgramJalurId = () => {\r\n    const found = jalurOptions.find(j => String(j.program_id) === String(programId) && j.jenis_pendaftar === jalur);\r\n    return found ? found.id : null;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n\r\n    // Tampilkan toast loading\r\n    toast({\r\n      title: \"Memproses Pendaftaran\",\r\n      description: \"Mohon tunggu sebentar...\",\r\n      duration: 2000,\r\n    });\r\n\r\n    try {\r\n      // Validasi semua field sebelum submit\r\n      const fieldsToValidate = [\r\n        { name: 'nama_lengkap', value: student.nama_lengkap },\r\n        { name: 'tempat_lahir', value: student.tempat_lahir },\r\n        { name: 'tanggal_lahir', value: student.tanggal_lahir },\r\n        { name: 'alamat', value: student.alamat },\r\n        { name: 'programId', value: programId },\r\n        { name: 'tahunAjaranId', value: tahunAjaranId },\r\n        { name: 'jalur', value: jalur },\r\n        { name: 'akte', value: documents.akte },\r\n        { name: 'kk', value: documents.kk },\r\n        { name: 'rapor', value: documents.rapor }\r\n      ];\r\n\r\n      let hasErrors = false;\r\n      \r\n      for (const field of fieldsToValidate) {\r\n        const error = validateField(field.name, field.value);\r\n        if (error) {\r\n          toast({\r\n            title: \"Kesalahan Pengisian\",\r\n            description: error,\r\n            variant: \"destructive\",\r\n            duration: 4000,\r\n          });\r\n          hasErrors = true;\r\n          break; // Hentikan loop setelah error pertama\r\n        }\r\n      }\r\n\r\n      if (hasErrors) {\r\n        return;\r\n      }\r\n\r\n      // 1. Tambah siswa\r\n      const resSiswa = await fetch(\"/api/siswa\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"Authorization\": `Bearer ${getToken()}`\r\n        },\r\n        body: JSON.stringify(student),\r\n      });\r\n      const dataSiswa = await resSiswa.json();\r\n      if (!resSiswa.ok || !dataSiswa.data || !dataSiswa.data.siswa_id) {\r\n        throw new Error(dataSiswa.message || \"Gagal menambah data siswa. Silakan cek kembali.\");\r\n      }\r\n      const siswa_id = dataSiswa.data.siswa_id;\r\n\r\n      // 2. Submit pendaftaran (dapatkan pendaftaran_id)\r\n      const program_jalur_id = getProgramJalurId();\r\n      if (!program_jalur_id) {\r\n        toast({ title: 'Jalur tidak valid', description: 'Pilih jalur yang sesuai dengan program', variant: 'destructive' });\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n      const resPendaftaran = await fetch(\"/api/pendaftaran\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"Authorization\": `Bearer ${getToken()}`\r\n        },\r\n        body: JSON.stringify({\r\n          siswa_id,\r\n          program_id: programId,\r\n          tahun_ajaran_id: tahunAjaranId,\r\n          catatan,\r\n          program_jalur_id\r\n        }),\r\n      });\r\n      const dataPendaftaran = await resPendaftaran.json();\r\n      if (!resPendaftaran.ok || !dataPendaftaran.data || !dataPendaftaran.data.pendaftaran_id) {\r\n        throw new Error(dataPendaftaran.message || \"Gagal mendaftarkan siswa. Silakan coba lagi.\");\r\n      }\r\n      const pendaftaran_id = dataPendaftaran.data.pendaftaran_id;\r\n\r\n      // 3. Upload dokumen (pakai pendaftaran_id)\r\n      for (const [jenis, file] of Object.entries(documents)) {\r\n        if (!file) continue;\r\n        const formData = new FormData();\r\n        formData.append(\"file\", file);\r\n        formData.append(\"pendaftaran_id\", pendaftaran_id);\r\n        formData.append(\"jenis_dokumen\",\r\n          jenis === \"kk\"\r\n            ? \"kartu_keluarga\"\r\n            : jenis === \"akte\"\r\n            ? \"akta_kelahiran\"\r\n            : \"lainnya\" // rapor dikirim sebagai 'lainnya'\r\n        );\r\n        const resDoc = await fetch(\"/api/dokumen\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Authorization\": `Bearer ${getToken()}`\r\n          },\r\n          body: formData,\r\n        });\r\n        const dataDoc = await resDoc.json();\r\n        if (!resDoc.ok) throw new Error(dataDoc.message || `Gagal upload dokumen ${jenis}. Silakan coba lagi.`);\r\n      }\r\n\r\n      toast({\r\n        title: \"Pendaftaran Berhasil\",\r\n        description: `Siswa ${student.nama_lengkap} berhasil didaftarkan.`,\r\n      });\r\n      navigate(\"/dashboard\"); // atau ke halaman lain sesuai kebutuhan\r\n    } catch (error) {\r\n      // Tampilkan toast error dengan pesan yang spesifik\r\n      toast({\r\n        title: \"Pendaftaran Gagal\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n        duration: 4000,\r\n      });\r\n      \r\n      // Log error untuk debugging\r\n      console.error('Registration error:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Fetch tahun ajaran dari backend\r\n  useEffect(() => {\r\n    fetch('/api/tahunajaran', {\r\n      headers: {\r\n        'Authorization': `Bearer ${getToken()}`\r\n      }\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        if (data && data.data) {\r\n          setTahunAjaranOptions(data.data);\r\n        }\r\n      });\r\n  }, []);\r\n\r\n  // Cek apakah user sudah pernah mendaftarkan siswa\r\n  useEffect(() => {\r\n    fetch('/api/siswa/my', {\r\n      headers: {\r\n        'Authorization': `Bearer ${getToken()}`\r\n      }\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        if (data && data.data && data.data.length > 0) {\r\n          setSudahAdaSiswa(true);\r\n        }\r\n      });\r\n  }, []);\r\n\r\n  // Fetch program dari backend\r\n  useEffect(() => {\r\n    fetch('/api/program', {\r\n      headers: {\r\n        'Authorization': `Bearer ${getToken()}`\r\n      }\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        if (data && data.data) {\r\n          setProgramOptions(data.data);\r\n        }\r\n      });\r\n  }, []);\r\n\r\n  // Fetch jalur pendaftaran dari backend\r\n  useEffect(() => {\r\n    fetch('/api/program/jalur', {\r\n      headers: {\r\n        'Authorization': `Bearer ${getToken()}`\r\n      }\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        if (data && data.data) {\r\n          setJalurOptions(data.data);\r\n        }\r\n      });\r\n  }, []);\r\n\r\n  // Ambil unique jalur dari jalurOptions\r\n  const uniqueJalur = Array.from(\r\n    new Set(jalurOptions.map(j => j.jenis_pendaftar))\r\n  ).map(jenis => {\r\n    return jalurOptions.find(j => j.jenis_pendaftar === jenis);\r\n  });\r\n\r\n  // Mapping label jalur\r\n  const getJalurLabel = (value) => {\r\n    switch (value) {\r\n      case 'reguler': return 'Reguler';\r\n      case 'Prestasi akademik': return 'Prestasi Akademik';\r\n      case 'prestasi non akademik': return 'Prestasi Non Akademik';\r\n      case 'tahfiz': return 'Tahfizh';\r\n      default: return value;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen items-center justify-center p-6\">\r\n      {sudahAdaSiswa ? (\r\n        <div className=\"w-full max-w-lg bg-white p-8 rounded-lg shadow text-center\">\r\n          <h1 className=\"text-2xl font-bold mb-4\">Pendaftaran Siswa</h1>\r\n          <p className=\"mb-4\">Anda sudah mendaftarkan siswa. Satu wali hanya boleh mendaftarkan satu siswa.</p>\r\n          <Button onClick={() => navigate('/dashboard')}>Kembali ke Dashboard</Button>\r\n        </div>\r\n      ) : (\r\n        <form className=\"w-full max-w-lg space-y-6 bg-white p-8 rounded-lg shadow\" onSubmit={handleSubmit}>\r\n          <h1 className=\"text-2xl font-bold mb-4\">Pendaftaran Siswa Baru</h1>\r\n          {/* Data Siswa */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"nama_lengkap\">Nama Lengkap Siswa</Label>\r\n            <Input id=\"nama_lengkap\" name=\"nama_lengkap\" value={student.nama_lengkap} onChange={handleStudentChange} required disabled={isLoading} onBlur={() => handleFieldBlur('nama_lengkap', student.nama_lengkap)} />\r\n            <HelperText text=\"Minimal 2 kata (nama depan dan belakang)\" />\r\n            <ErrorMessage fieldName=\"nama_lengkap\" />\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"tempat_lahir\">Tempat Lahir</Label>\r\n            <Input id=\"tempat_lahir\" name=\"tempat_lahir\" value={student.tempat_lahir} onChange={handleStudentChange} required disabled={isLoading} onBlur={() => handleFieldBlur('tempat_lahir', student.tempat_lahir)} />\r\n            <HelperText text=\"Contoh: Jakarta, Bandung, Surabaya\" />\r\n            <ErrorMessage fieldName=\"tempat_lahir\" />\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"tanggal_lahir\">Tanggal Lahir</Label>\r\n            <Input id=\"tanggal_lahir\" name=\"tanggal_lahir\" type=\"date\" value={student.tanggal_lahir} onChange={handleStudentChange} required disabled={isLoading} onBlur={() => handleFieldBlur('tanggal_lahir', student.tanggal_lahir)} />\r\n            <HelperText text=\"Usia siswa harus antara 4-18 tahun\" />\r\n            <ErrorMessage fieldName=\"tanggal_lahir\" />\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"jenis_kelamin\">Jenis Kelamin</Label>\r\n            <select id=\"jenis_kelamin\" name=\"jenis_kelamin\" value={student.jenis_kelamin} onChange={handleStudentChange} required disabled={isLoading} className=\"w-full border rounded p-2\" onBlur={() => handleFieldBlur('jenis_kelamin', student.jenis_kelamin)}>\r\n              <option value=\"L\">Laki-laki</option>\r\n              <option value=\"P\">Perempuan</option>\r\n            </select>\r\n            <ErrorMessage fieldName=\"jenis_kelamin\" />\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"alamat\">Alamat</Label>\r\n            <Input id=\"alamat\" name=\"alamat\" value={student.alamat} onChange={handleStudentChange} required disabled={isLoading} onBlur={() => handleFieldBlur('alamat', student.alamat)} />\r\n            <HelperText text=\"Minimal 10 karakter, alamat lengkap\" />\r\n            <ErrorMessage fieldName=\"alamat\" />\r\n          </div>\r\n          {/* Upload Dokumen */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"akte\">Akte Kelahiran (PDF)</Label>\r\n            <Input id=\"akte\" name=\"akte\" type=\"file\" accept=\".pdf\" onChange={handleDocumentChange} required disabled={isLoading} onBlur={() => handleFieldBlur('akte', documents.akte)} />\r\n            <HelperText text=\"Upload file PDF akte kelahiran siswa\" />\r\n            <ErrorMessage fieldName=\"akte\" />\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"kk\">Kartu Keluarga (PDF)</Label>\r\n            <Input id=\"kk\" name=\"kk\" type=\"file\" accept=\".pdf\" onChange={handleDocumentChange} required disabled={isLoading} onBlur={() => handleFieldBlur('kk', documents.kk)} />\r\n            <HelperText text=\"Upload file PDF kartu keluarga\" />\r\n            <ErrorMessage fieldName=\"kk\" />\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"rapor\">Rapor (PDF)</Label>\r\n            <Input id=\"rapor\" name=\"rapor\" type=\"file\" accept=\".pdf\" onChange={handleDocumentChange} required disabled={isLoading} onBlur={() => handleFieldBlur('rapor', documents.rapor)} />\r\n            <HelperText text=\"Upload file PDF rapor terakhir siswa\" />\r\n            <ErrorMessage fieldName=\"rapor\" />\r\n          </div>\r\n          {/* Pilihan Program, Jalur, Tahun Ajaran */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"program\">Program Sekolah</Label>\r\n            <select id=\"program\" value={programId} onChange={e => handleFieldChange('programId', e.target.value)} required disabled={isLoading} className={getInputClassName('programId')} onBlur={() => handleFieldBlur('programId', programId)}>\r\n              <option value=\"\">Pilih Program</option>\r\n              {programOptions.map(opt => (\r\n                <option key={opt.program_id} value={opt.program_id}>{opt.nama_program}</option>\r\n              ))}\r\n            </select>\r\n            <ErrorMessage fieldName=\"programId\" />\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"jalur\">Jalur Pendaftaran</Label>\r\n            <select\r\n              id=\"jalur\"\r\n              name=\"jalur\"\r\n              value={jalur}\r\n              onChange={e => handleFieldChange('jalur', e.target.value)}\r\n              required\r\n              className={getInputClassName('jalur')}\r\n              onBlur={() => handleFieldBlur('jalur', jalur)}\r\n              disabled={!programId || isLoading}\r\n            >\r\n              <option value=\"\">Pilih Jalur</option>\r\n              {filteredJalurOptions.map(jalurOpt => (\r\n                <option key={jalurOpt.id} value={jalurOpt.jenis_pendaftar}>\r\n                  {jalurOpt.jenis_pendaftar}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            <ErrorMessage fieldName=\"jalur\" />\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"tahunajaran\">Tahun Ajaran</Label>\r\n            <select id=\"tahunajaran\" value={tahunAjaranId} onChange={e => handleFieldChange('tahunAjaranId', e.target.value)} required disabled={isLoading} className={getInputClassName('tahunAjaranId')} onBlur={() => handleFieldBlur('tahunAjaranId', tahunAjaranId)}>\r\n              <option value=\"\">Pilih Tahun Ajaran</option>\r\n              {tahunAjaranOptions.map(opt => (\r\n                <option key={opt.id_tahunajaran} value={opt.id_tahunajaran}>{opt.tahun_ajaran}</option>\r\n              ))}\r\n            </select>\r\n            <ErrorMessage fieldName=\"tahunAjaranId\" />\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"catatan\">Catatan (opsional)</Label>\r\n            <Input id=\"catatan\" value={catatan} onChange={e => handleFieldChange('catatan', e.target.value)} disabled={isLoading} />\r\n            <ErrorMessage fieldName=\"catatan\" />\r\n          </div>\r\n          <Button type=\"submit\" className=\"w-full\" disabled={isLoading}>\r\n            {isLoading ? \"Memproses...\" : \"Daftarkan Siswa\"}\r\n          </Button>\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            className=\"w-full\"\r\n            onClick={() => navigate('/dashboard')}\r\n            disabled={isLoading}\r\n          >\r\n            Kembali\r\n          </Button>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}